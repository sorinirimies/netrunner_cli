# NetRunner CLI - Enhanced Animations & Server Selection

## üéÆ Animation System Overview

NetRunner CLI now features a complete cyberpunk-themed animation system that replaces traditional progress bars with engaging, dynamic spinners and visual effects.

## üéØ New Animation Types

### Core Spinners

#### 1. Cyberpunk Scanner
```
‚ü®‚ü®‚ü® ‚ñ∞‚ñ∞‚ñ∞‚ñ∞‚ñ∞‚ñ∞‚ñ∞ SCANNING NETWORK NODES ‚ü©‚ü©‚ü©
```
- **Use**: Primary scanning operations
- **Pattern**: Flowing blocks with cyberpunk brackets
- **Speed**: 150ms intervals for dramatic effect

#### 2. Pacman Data Hunter
```
üéÆ ·ó§    ‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢ CONSUMING DATA PACKETS
```
- **Use**: Data processing operations
- **Pattern**: Pacman eating dots across the line
- **Speed**: 150ms intervals for retro gaming feel

#### 3. Download Arrows
```
üì• ‚¨áÔ∏è ‚¨áÔ∏è ‚¨áÔ∏è ‚¨áÔ∏è DOWNLOADING DATA STREAMS
```
- **Use**: Download speed testing
- **Pattern**: Cascading arrows with completion indicator
- **Speed**: 200ms intervals with final "üíæ Data Captured"

#### 4. Upload Rockets
```
üì§ ‚¨ÜÔ∏è ‚¨ÜÔ∏è ‚¨ÜÔ∏è ‚¨ÜÔ∏è TRANSMITTING DATA PACKETS
```
- **Use**: Upload speed testing
- **Pattern**: Rising arrows with rocket completion
- **Speed**: 180ms intervals with final "üöÄ Sent Complete"

#### 5. Ping Pong Animation
```
üèì üèì    üìç MEASURING NEURAL RESPONSE
```
- **Use**: Latency testing
- **Pattern**: Ball bouncing between endpoints
- **Speed**: 100ms intervals for rapid response feel

### Special Effects Spinners

#### 6. DNA Helix
```
üß¨ ‚ï±   ‚ï≤ ANALYZING DNS INFRASTRUCTURE
```
- **Use**: DNS analysis operations
- **Pattern**: Rotating double helix structure
- **Speed**: 200ms intervals for scientific feel

#### 7. Rocket Boost
```
üöÄ üöÄ   üåü TESTING DNS QUANTUM RESPONSE
```
- **Use**: High-speed operations
- **Pattern**: Rocket leaving star trail
- **Speed**: 120ms intervals for dynamic motion

#### 8. Wave Frequency
```
üåä ‚ñÅ‚ñÇ‚ñÉ‚ñÑ‚ñÖ‚ñÜ‚ñá‚ñà‚ñà‚ñá‚ñÜ‚ñÖ‚ñÑ‚ñÉ‚ñÇ‚ñÅ SCANNING FREQUENCIES
```
- **Use**: Signal analysis
- **Pattern**: Audio wave visualization
- **Speed**: 100ms intervals for smooth wave motion

#### 9. Speed Test Flow
```
üåê ‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì DATA FLOW ANALYSIS
```
- **Use**: General speed testing
- **Pattern**: Flowing gradient blocks
- **Speed**: 120ms intervals

## üåü Enhanced Visual Effects

### Matrix Rain Effects
```
‚ñà0‚†à‚†Ñ‚†Ç‚°Ä‚††‚††‚†à1‚†à‚†Ñ‚°Ä‚††‚°Ä‚†ê‚†Å‚†Å1‚††0‚†Ç‚†Å‚†Ç‚††‚††‚†Ñ‚†Ñ‚†ê‚¢Ä0
‚ñà‚†ê‚††010‚°Ä‚¢Ä‚°Ä0‚¢Ä‚†ê‚¢Ä‚†Å‚¢Ä‚††‚†Ñ‚†Å‚¢Ä‚†Ñ‚¢Ä‚†ê‚†Å‚¢Ä‚††‚†Ñ‚†Å‚†Å‚†ê‚†Å‚†ê
‚ñà‚†Ñ1‚††‚†à‚†Å‚¢Ä‚††‚†à1‚°Ä‚†Å0‚¢Ä‚†Ñ1‚¢Ä‚†Ç1‚†Ç‚†Ñ‚††‚†Ñ‚†Å‚†Ç‚†à‚†Ç‚†Ç1‚†Ç‚†ê
```
- **Use**: Background atmosphere during operations
- **Effect**: Cascading green digital rain
- **Duration**: 2-3 lines for subtle enhancement

### Typing Effects
```
‚ü®‚ü®‚ü® NEURAL INTERFACE ACTIVATED ‚ü©‚ü©‚ü©
```
- **Use**: System status messages
- **Effect**: Character-by-character typing
- **Speed**: 50ms per character

### Pulse Animations
```
‚ü®‚ü®‚ü® SCANNING QUANTUM NETWORKS ‚ü©‚ü©‚ü© (bright cyan)
‚ü®‚ü®‚ü® SCANNING QUANTUM NETWORKS ‚ü©‚ü©‚ü© (blue)
```
- **Use**: Important status updates
- **Effect**: Color pulsing between bright and dim
- **Cycles**: 2-3 pulses per message

### Connection Establishment Sequence
```
‚ü®‚ü®‚ü® INITIALIZING NEURAL INTERFACE ‚ü©‚ü©‚ü©
‚ü®‚ü®‚ü® SCANNING NETWORK TOPOLOGY ‚ü©‚ü©‚ü©
‚ü®‚ü®‚ü® ESTABLISHING QUANTUM TUNNEL ‚ü©‚ü©‚ü©
‚ü®‚ü®‚ü® CALIBRATING DATA STREAMS ‚ü©‚ü©‚ü©
‚ü®‚ü®‚ü® CONNECTION ESTABLISHED ‚ü©‚ü©‚ü©
```
- **Use**: System initialization
- **Effect**: Sequential status messages with delays
- **Timing**: 800ms between messages

## üåê Advanced Server Selection System

### Multi-Provider Server Pool

#### Primary Servers
1. **Cloudflare Global** - `https://speed.cloudflare.com`
   - Reliability: ‚≠ê‚≠ê‚≠ê‚≠ê‚≠ê 
   - Coverage: Global CDN
   - Capabilities: Download ‚úÖ Upload ‚úÖ Latency ‚úÖ

2. **Cloudflare Regional**
   - US: `https://cloudflare.com`
   - EU: `https://1.1.1.1` 
   - Asia: `https://1.0.0.1`

3. **Google Global** - `https://www.google.com`
   - Reliability: ‚≠ê‚≠ê‚≠ê‚≠ê
   - Capabilities: Download ‚úÖ Upload ‚ùå Latency ‚úÖ

4. **Netflix Fast.com** - `https://fast.com`
   - Reliability: ‚≠ê‚≠ê‚≠ê‚≠ê
   - Specialization: Download testing
   - Max Test Size: 200MB

#### Backup Servers
5. **HTTPBin Test** - `https://httpbin.org`
   - Purpose: Development and fallback testing
   - Full capability support

### Intelligent Server Scoring Algorithm

```rust
Server Score = (Latency Score √ó 0.4) + 
               (Download Capability √ó 0.3) + 
               (Geographic Weight √ó 0.2) + 
               (Provider Reliability √ó 0.1) +
               (Proximity Bonus √ó 0.05)
```

#### Scoring Factors:
- **Latency Performance** (40%): <20ms=40pts, <50ms=35pts, <100ms=25pts
- **Download Capability** (30%): Real connection test results
- **Geographic Weight** (20%): Based on server location optimization
- **Provider Reliability** (10%): Cloudflare=10pts, Google=8pts, Netflix=7pts
- **Proximity Bonus** (5%): Country/region matching

### Fallback Strategy

1. **Primary Selection**: Best score >0.7 + latency <200ms
2. **Cloudflare Fallback**: Best Cloudflare server if available
3. **Any Working Server**: Any server with latency <1000ms + score >0.2

### Geographic Optimization

#### Location Detection Services
1. **ipapi.co** - Primary geolocation service
2. **ipinfo.io** - Secondary with coordinate data
3. **api.ipify.org** - Fallback for basic info

#### Server Selection Criteria
- **Same Country**: +5 point bonus
- **Regional CDN**: Prefer regional endpoints
- **ISP Optimization**: Consider ISP-specific routing

## üéØ Animation Integration Points

### Speed Test Flow
1. **Server Discovery**: Cyberpunk scanner
2. **Latency Testing**: Ping pong animation
3. **Download Test**: Download arrows with data capture
4. **Upload Test**: Upload rockets with transmission
5. **Results**: Enhanced visual bars and quality indicators

### Diagnostics Flow
1. **Initialization**: Connection establishment sequence + matrix rain
2. **Gateway Detection**: Cyberpunk scanner
3. **DNS Analysis**: DNA helix spinner
4. **DNS Response**: Rocket boost spinner
5. **Route Tracing**: Progress bar with neural pathway mapping
6. **IPv6 Check**: Speed test flow spinner
7. **Results**: Comprehensive cybernetic analysis display

### Server Testing Flow
1. **Location Detection**: Cyberpunk scanner
2. **Multi-Server Test**: Network scanner for each server
3. **Performance Analysis**: Detailed metrics with quality scores
4. **Recommendation**: Final server selection with reasoning

## üéÆ Animation Showcase Mode

Access via interactive menu option 6 or:
```bash
echo "5" | ./target/release/netrunner_cli
```

Demonstrates all animation types:
1. Typing effects
2. Pulse animations
3. Matrix rain
4. Connection sequences
5. All spinner variations
6. Special effects combinations

## üõ†Ô∏è Technical Implementation

### Spinner Creation
```rust
pub fn create_pacman_spinner(&self, message: &str) -> ProgressBar {
    let pb = self.multi_progress.add(ProgressBar::new_spinner());
    pb.set_style(
        ProgressStyle::default_spinner()
            .template("üéÆ {spinner:.bright_yellow} {msg}")
            .tick_strings(&["·óß ‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢", "·ó§  ‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢", ...])
    );
    pb.set_message(message.to_string());
    pb.enable_steady_tick(Duration::from_millis(150));
    pb
}
```

### Dynamic Message Updates
```rust
// Dynamic progress messages during download
let download_messages = [
    "ACCESSING DATA NODES",
    "ESTABLISHING QUANTUM TUNNEL", 
    "SYNCHRONIZING NEURAL PACKETS",
    "DOWNLOADING CYBER STREAMS",
    "OPTIMIZING DATA FLOW",
    "CAPTURING DIGITAL ESSENCE",
];
```

## üé® Color Schemes

- **Cyberpunk Scanner**: Bright cyan with magenta accents
- **Data Operations**: Blue/green for downloads, magenta for uploads  
- **Status Messages**: Green for success, red for errors, yellow for warnings
- **Special Effects**: Bright colors with dimmer alternates for pulsing

## üìä Performance Impact

- **Animation Overhead**: <1% CPU usage
- **Memory Impact**: Minimal (spinner state only)
- **Network Impact**: None (animations are purely visual)
- **Disable Option**: `--no-animation` flag available

## üöÄ Usage Examples

### Basic Speed Test with Animations
```bash
./target/release/netrunner_cli --mode speed
```

### Diagnostics with Full Effects
```bash  
./target/release/netrunner_cli --mode diag
```

### Server Analysis with Debug Info
```bash
./target/release/netrunner_cli --mode servers --debug-servers
```

### Animation Showcase
```bash
./target/release/netrunner_cli  # Select option 6
```

### Disable Animations
```bash
./target/release/netrunner_cli --no-animation --mode speed
```

## üéØ Future Enhancements

- **Audio Effects**: Sound effects for completion events
- **Custom Themes**: User-selectable animation themes
- **Interactive Elements**: Click-to-skip long animations
- **Performance Scaling**: Adaptive animation complexity based on terminal capability
- **Server Health Monitoring**: Real-time server status tracking with visual indicators